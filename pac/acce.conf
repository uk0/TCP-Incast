# ==========================================
# Lotspeed 混合场景优化配置 (WAN + LAN)
# ==========================================

# --------- 调试开关 ----------
debug = 0

# --------- 网卡名称 (必填) ----------
# 请使用 ifconfig 或 ip addr 确认你的外网网卡名称
param_dev = eth0

# ------------ 基础参数 ------------
# MSS 保持标准，除非你是巨型帧环境
mss = 1460

# 初始窗口
# 适当调大以应对高延迟网络的慢启动，64 约为 90KB 数据
min_win = 64

# ------------ 核心：时间与延迟 (混合场景关键) ------------

# 定时器精度 (微秒)
# 默认 5000 (5ms)。
# 为了让 LAN 请求更灵敏，建议降低到 2000 (2ms) 或 1000 (1ms)
# 注意：越小 CPU 占用越高。2000 是个平衡点。
delay_in_us = 2000

# 最小 RTT (微秒) [关键修改]
# 默认 166000 (166ms) 会导致 LAN 流量处理异常。
# 必须设为极低值，以兼容本地 1ms 的延迟。
# 设为 1000 (1ms) 既能覆盖 LAN，也能过滤掉测量误差。
min_rtt = 1000

# 最大 RTT (微秒)
# 设为 500ms 以涵盖极差的跨国网络环境
max_rtt = 500000

# 最大排队延迟 (微秒)
# 如果包在队列里卡了这么久，强制发送。
# 设为 200ms (200000) 比较合理，太小会导致 PAC 失去平滑流量的能力。
max_delay = 200000

# ------------ 核心：流量控制 (决定速度上限) ------------

# 发送缓冲区大小 (字节)
# 这个值决定了你能跑满多少带宽。
# 公式 = 物理带宽(Bps) * 最大RTT(秒) * 1.5
# 假设带宽 100Mbps, RTT 0.3s -> 12.5MB/s * 0.3 * 1.5 ≈ 5.6MB
# 假设带宽 1Gbps, RTT 0.2s -> 125MB/s * 0.2 * 1.5 ≈ 37.5MB
# 下面设置为 8MB (8388608)，适合 100-200Mbps 带宽。
# 如果你是 G 口服务器，请改为 16777216 (16MB) 或更高。
buffer_size = 8388608

# 最小包长度
min_pkt_len = 74

# ------------ 算法微调 ------------

# 吞吐量平滑因子 (0-1000)
# 混合环境下网络抖动大，适当降低新值的权重，防止网络波动导致误判。
throughput_smooth = 750

# RTT 平滑因子
# 保持默认或微调
rtt_smooth = 900

# 拥塞判定阈值
# 吞吐量跌至 50% 时触发。比默认 60% 更宽容，防止误伤高丢包线路。
alpha = 500

# 连续下降计数
reduction_thresh = 5

# ------------ 优先级分类 (关键体验) ------------

# 优先流阈值 (字节)
# 15MB。这意味着网页浏览、API调用、SSH操作都会直接进入高优先级队列，
# 不受流量整形（Token Bucket）的严格限制，保证 LAN 和轻量请求的瞬时响应。
prio_thresh = 15728640

# 慢启动阈值
ss_thresh = 5242880